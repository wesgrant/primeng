{"version":3,"file":"paginator.js","sourceRoot":"","sources":["paginator.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,sCAAmG;AACnG,0CAA6C;AAgC7C,IAAa,SAAS;IA9BtB;QAgCa,iBAAY,GAAW,CAAC,CAAC;QAExB,iBAAY,GAAsB,IAAI,mBAAY,EAAE,CAAC;QAUxD,kBAAa,GAAW,CAAC,CAAC;QAE1B,WAAM,GAAW,CAAC,CAAC;QAEnB,UAAK,GAAW,CAAC,CAAC;IAgH7B,CAAC;IA9GY,sBAAI,mCAAY;aAAhB;YACL,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC;QAC9B,CAAC;aAED,UAAiB,GAAU;YACvB,IAAI,CAAC,aAAa,GAAG,GAAG,CAAC;YACzB,IAAI,CAAC,eAAe,EAAE,CAAC;QAC3B,CAAC;;;OALA;IAOQ,sBAAI,4BAAK;aAAT;YACL,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;QACvB,CAAC;aAED,UAAU,GAAU;YAChB,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC;YAClB,IAAI,CAAC,eAAe,EAAE,CAAC;QAC3B,CAAC;;;OALA;IAOQ,sBAAI,2BAAI;aAAR;YACL,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC;QACtB,CAAC;aAED,UAAS,GAAU;YACf,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC;YACjB,IAAI,CAAC,eAAe,EAAE,CAAC;QAC3B,CAAC;;;OALA;IAOD,+BAAW,GAAX;QACI,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;IAChC,CAAC;IAED,8BAAU,GAAV;QACI,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,KAAK,IAAI,CAAC,YAAY,EAAE,GAAG,CAAC,CAAC;IACtD,CAAC;IAED,gCAAY,GAAZ;QACI,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,GAAC,IAAI,CAAC,IAAI,CAAC,IAAE,CAAC,CAAC;IACrD,CAAC;IAED,+CAA2B,GAA3B;QACI,IAAI,aAAa,GAAG,IAAI,CAAC,YAAY,EAAE,EACvC,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,EAAE,aAAa,CAAC,CAAC;QAE1D,sDAAsD;QACtD,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EACzE,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,aAAa,GAAG,CAAC,EAAE,KAAK,GAAG,YAAY,GAAG,CAAC,CAAC,CAAC;QAE5D,qCAAqC;QACrC,IAAI,KAAK,GAAG,IAAI,CAAC,YAAY,GAAG,CAAC,GAAG,GAAG,KAAK,GAAG,CAAC,CAAC,CAAC;QAClD,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,KAAK,GAAG,KAAK,CAAC,CAAC;QAEnC,MAAM,CAAC,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;IACxB,CAAC;IAED,mCAAe,GAAf;QACI,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QACpB,IAAI,UAAU,GAAG,IAAI,CAAC,2BAA2B,EAAE,EACnD,KAAK,GAAG,UAAU,CAAC,CAAC,CAAC,EACrB,GAAG,GAAG,UAAU,CAAC,CAAC,CAAC,CAAC;QAEpB,GAAG,CAAA,CAAC,IAAI,CAAC,GAAG,KAAK,EAAE,CAAC,IAAI,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC;YAC/B,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;QAC/B,CAAC;IACL,CAAC;IAED,8BAAU,GAAV,UAAW,CAAS,EAAE,KAAK;QACvB,IAAI,EAAE,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;QAE7B,EAAE,CAAA,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;YAClB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;YAC3B,IAAI,KAAK,GAAG;gBACR,IAAI,EAAE,CAAC;gBACP,KAAK,EAAE,IAAI,CAAC,KAAK;gBACjB,IAAI,EAAE,IAAI,CAAC,IAAI;gBACf,SAAS,EAAE,EAAE;aAChB,CAAC;YACF,IAAI,CAAC,eAAe,EAAE,CAAC;YAEvB,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAClC,CAAC;QAED,EAAE,CAAA,CAAC,KAAK,CAAC,CAAC,CAAC;YACP,KAAK,CAAC,cAAc,EAAE,CAAC;QAC3B,CAAC;IACL,CAAC;IAED,2BAAO,GAAP;QACI,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC;IAC9C,CAAC;IAED,qCAAiB,GAAjB,UAAkB,KAAK;QACnB,IAAI,CAAC,UAAU,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;IAC9B,CAAC;IAED,oCAAgB,GAAhB,UAAiB,KAAK;QAClB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,EAAE,GAAG,CAAC,EAAE,KAAK,CAAC,CAAC;IAC/C,CAAC;IAED,oCAAgB,GAAhB,UAAiB,KAAK;QAClB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,EAAE,GAAI,CAAC,EAAE,KAAK,CAAC,CAAC;IAChD,CAAC;IAED,oCAAgB,GAAhB,UAAiB,KAAK;QAClB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,YAAY,EAAE,GAAG,CAAC,EAAE,KAAK,CAAC,CAAC;IACpD,CAAC;IAED,+BAAW,GAAX,UAAY,KAAK;QACb,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;QAChE,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;IAClC,CAAC;IACL,gBAAC;AAAD,CAAC,AAlID,IAkIC;AAhIY;IAAR,YAAK,EAAE;;+CAA0B;AAExB;IAAT,aAAM,EAAE;8BAAe,mBAAY;+CAA2B;AAEtD;IAAR,YAAK,EAAE;;wCAAY;AAEX;IAAR,YAAK,EAAE;;6CAAoB;AAEnB;IAAR,YAAK,EAAE;;qDAA8B;AAU7B;IAAR,YAAK,EAAE;;;6CAEP;AAOQ;IAAR,YAAK,EAAE;;;sCAEP;AAOQ;IAAR,YAAK,EAAE;;;qCAEP;AAxCQ,SAAS;IA9BrB,gBAAS,CAAC;QACP,QAAQ,EAAE,aAAa;QACvB,QAAQ,EAAE,kmEA0BT;KACJ,CAAC;GACW,SAAS,CAkIrB;AAlIY,8BAAS;AAyItB,IAAa,eAAe;IAA5B;IAA+B,CAAC;IAAD,sBAAC;AAAD,CAAC,AAAhC,IAAgC;AAAnB,eAAe;IAL3B,eAAQ,CAAC;QACN,OAAO,EAAE,CAAC,qBAAY,CAAC;QACvB,OAAO,EAAE,CAAC,SAAS,CAAC;QACpB,YAAY,EAAE,CAAC,SAAS,CAAC;KAC5B,CAAC;GACW,eAAe,CAAI;AAAnB,0CAAe","sourcesContent":["import {NgModule,Component,ElementRef,Input,Output,SimpleChange,EventEmitter} from '@angular/core';\r\nimport {CommonModule} from '@angular/common';\r\n\r\n@Component({\r\n    selector: 'p-paginator',\r\n    template: `\r\n        <div [class]=\"styleClass\" [ngStyle]=\"style\" [ngClass]=\"'ui-paginator ui-widget ui-widget-header ui-unselectable-text'\">\r\n            <a href=\"#\" class=\"ui-paginator-first ui-paginator-element ui-state-default ui-corner-all\"\r\n                    (click)=\"changePageToFirst($event)\" [ngClass]=\"{'ui-state-disabled':isFirstPage()}\" [tabindex]=\"isFirstPage() ? -1 : null\">\r\n                <span class=\"fa fa-step-backward\"></span>\r\n            </a>\r\n            <a href=\"#\" class=\"ui-paginator-prev ui-paginator-element ui-state-default ui-corner-all\"\r\n                    (click)=\"changePageToPrev($event)\" [ngClass]=\"{'ui-state-disabled':isFirstPage()}\" [tabindex]=\"isFirstPage() ? -1 : null\">\r\n                <span class=\"fa fa-backward\"></span>\r\n            </a>\r\n            <span class=\"ui-paginator-pages\">\r\n                <a href=\"#\" *ngFor=\"let pageLink of pageLinks\" class=\"ui-paginator-page ui-paginator-element ui-state-default ui-corner-all\"\r\n                    (click)=\"changePage(pageLink - 1, $event)\" [ngClass]=\"{'ui-state-active': (pageLink-1 == getPage())}\">{{pageLink}}</a>\r\n            </span>\r\n            <a href=\"#\" class=\"ui-paginator-next ui-paginator-element ui-state-default ui-corner-all\"\r\n                    (click)=\"changePageToNext($event)\" [ngClass]=\"{'ui-state-disabled':isLastPage()}\" [tabindex]=\"isLastPage() ? -1 : null\">\r\n                <span class=\"fa fa-forward\"></span>\r\n            </a>\r\n            <a href=\"#\" class=\"ui-paginator-last ui-paginator-element ui-state-default ui-corner-all\"\r\n                    (click)=\"changePageToLast($event)\" [ngClass]=\"{'ui-state-disabled':isLastPage()}\" [tabindex]=\"isLastPage() ? -1 : null\">\r\n                <span class=\"fa fa-step-forward\"></span>\r\n            </a>\r\n            <select class=\"ui-paginator-rpp-options ui-widget ui-state-default\" *ngIf=\"rowsPerPageOptions\" (change)=\"onRppChange($event)\">\r\n                <option *ngFor=\"let opt of rowsPerPageOptions\" [value]=\"opt\" [selected]=\"rows == opt\">{{opt}}</option>\r\n            </select>\r\n        </div>\r\n    `\r\n})\r\nexport class Paginator {\r\n\r\n    @Input() pageLinkSize: number = 5;\r\n\r\n    @Output() onPageChange: EventEmitter<any> = new EventEmitter();\r\n\r\n    @Input() style: any;\r\n\r\n    @Input() styleClass: string;\r\n    \r\n    @Input() rowsPerPageOptions: number[];\r\n\r\n    public pageLinks: number[];\r\n\r\n    public _totalRecords: number = 0;\r\n    \r\n    public _first: number = 0;\r\n    \r\n    public _rows: number = 0;\r\n    \r\n    @Input() get totalRecords(): number {\r\n        return this._totalRecords;\r\n    }\r\n\r\n    set totalRecords(val:number) {\r\n        this._totalRecords = val;\r\n        this.updatePageLinks();\r\n    }\r\n    \r\n    @Input() get first(): number {\r\n        return this._first;\r\n    }\r\n\r\n    set first(val:number) {\r\n        this._first = val;\r\n        this.updatePageLinks();\r\n    }\r\n    \r\n    @Input() get rows(): number {\r\n        return this._rows;\r\n    }\r\n\r\n    set rows(val:number) {\r\n        this._rows = val;\r\n        this.updatePageLinks();\r\n    }\r\n\r\n    isFirstPage() {\r\n        return this.getPage() === 0;\r\n    }\r\n\r\n    isLastPage() {\r\n        return this.getPage() === this.getPageCount() - 1;\r\n    }\r\n\r\n    getPageCount() {\r\n        return Math.ceil(this.totalRecords/this.rows)||1;\r\n    }\r\n\r\n    calculatePageLinkBoundaries() {\r\n        let numberOfPages = this.getPageCount(),\r\n        visiblePages = Math.min(this.pageLinkSize, numberOfPages);\r\n\r\n        //calculate range, keep current in middle if necessary\r\n        let start = Math.max(0, Math.ceil(this.getPage() - ((visiblePages) / 2))),\r\n        end = Math.min(numberOfPages - 1, start + visiblePages - 1);\r\n\r\n        //check when approaching to last page\r\n        var delta = this.pageLinkSize - (end - start + 1);\r\n        start = Math.max(0, start - delta);\r\n\r\n        return [start, end];\r\n    }\r\n\r\n    updatePageLinks() {\r\n        this.pageLinks = [];\r\n        let boundaries = this.calculatePageLinkBoundaries(),\r\n        start = boundaries[0],\r\n        end = boundaries[1];\r\n\r\n        for(let i = start; i <= end; i++) {\r\n            this.pageLinks.push(i + 1);\r\n        }\r\n    }\r\n\r\n    changePage(p :number, event) {\r\n        var pc = this.getPageCount();\r\n\r\n        if(p >= 0 && p < pc) {\r\n            this.first = this.rows * p;\r\n            var state = {\r\n                page: p,\r\n                first: this.first,\r\n                rows: this.rows,\r\n                pageCount: pc\r\n            };\r\n            this.updatePageLinks();\r\n\r\n            this.onPageChange.emit(state);\r\n        }\r\n        \r\n        if(event) {\r\n            event.preventDefault();\r\n        }\r\n    }\r\n    \r\n    getPage(): number {\r\n        return Math.floor(this.first / this.rows);\r\n    }\r\n\r\n    changePageToFirst(event) {\r\n        this.changePage(0, event);\r\n    }\r\n\r\n    changePageToPrev(event) {\r\n        this.changePage(this.getPage() - 1, event);\r\n    }\r\n\r\n    changePageToNext(event) {\r\n        this.changePage(this.getPage()  + 1, event);\r\n    }\r\n\r\n    changePageToLast(event) {\r\n        this.changePage(this.getPageCount() - 1, event);\r\n    }\r\n    \r\n    onRppChange(event) {\r\n        this.rows = this.rowsPerPageOptions[event.target.selectedIndex];\r\n        this.changePageToFirst(event);\r\n    }\r\n}\r\n\r\n@NgModule({\r\n    imports: [CommonModule],\r\n    exports: [Paginator],\r\n    declarations: [Paginator]\r\n})\r\nexport class PaginatorModule { }\r\n"]}