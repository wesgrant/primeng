{"version":3,"file":"menu.js","sourceRoot":"","sources":["menu.ts"],"names":[],"mappings":"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","sourcesContent":["import {NgModule,Component,ElementRef,AfterViewInit,OnDestroy,Input,Output,Renderer,HostListener,EventEmitter,ViewChild} from '@angular/core';\r\nimport {CommonModule} from '@angular/common';\r\nimport {DomHandler} from '../dom/domhandler';\r\nimport {MenuItem} from '../common/api';\r\nimport {RouterModule} from '@angular/router';\r\n\r\n@Component({\r\n    selector: 'p-menu',\r\n    template: `\r\n        <div #container [ngClass]=\"{'ui-menu ui-widget ui-widget-content ui-corner-all ui-helper-clearfix':true,'ui-menu-dynamic ui-shadow':popup}\" \r\n            [class]=\"styleClass\" [ngStyle]=\"style\" (click)=\"preventDocumentDefault=true\">\r\n            <ul class=\"ui-menu-list ui-helper-reset\">\r\n                <ng-template ngFor let-submenu [ngForOf]=\"model\" *ngIf=\"hasSubMenu()\">\r\n                    <li class=\"ui-widget-header ui-corner-all\"><h3>{{submenu.label}}</h3></li>\r\n                    <li *ngFor=\"let item of submenu.items\" class=\"ui-menuitem ui-widget ui-corner-all\">\r\n                        <a *ngIf=\"!item.routerLink\" [href]=\"item.url||'#'\" class=\"ui-menuitem-link ui-corner-all\" [attr.target]=\"item.target\"\r\n                            [ngClass]=\"{'ui-state-disabled':item.disabled}\" (click)=\"itemClick($event, item)\">\r\n                            <span class=\"ui-menuitem-icon fa fa-fw\" *ngIf=\"item.icon\" [ngClass]=\"item.icon\"></span>\r\n                            <span class=\"ui-menuitem-text\">{{item.label}}</span>\r\n                        </a>\r\n                        <a *ngIf=\"item.routerLink\" [routerLink]=\"item.routerLink\" [routerLinkActive]=\"'ui-state-active'\" class=\"ui-menuitem-link ui-corner-all\" [attr.target]=\"item.target\"\r\n                            [ngClass]=\"{'ui-state-disabled':item.disabled}\" (click)=\"itemClick($event, item)\">\r\n                            <span class=\"ui-menuitem-icon fa fa-fw\" *ngIf=\"item.icon\" [ngClass]=\"item.icon\"></span>\r\n                            <span class=\"ui-menuitem-text\">{{item.label}}</span>\r\n                        </a>\r\n                    </li>\r\n                </ng-template>\r\n                <ng-template ngFor let-item [ngForOf]=\"model\" *ngIf=\"!hasSubMenu()\">\r\n                    <li class=\"ui-menuitem ui-widget ui-corner-all\">\r\n                        <a *ngIf=\"!item.routerLink\" [href]=\"item.url||'#'\" class=\"ui-menuitem-link ui-corner-all\" [attr.target]=\"item.target\"\r\n                            [ngClass]=\"{'ui-state-disabled':item.disabled}\" (click)=\"itemClick($event, item)\">\r\n                            <span class=\"ui-menuitem-icon fa fa-fw\" *ngIf=\"item.icon\" [ngClass]=\"item.icon\"></span>\r\n                            <span class=\"ui-menuitem-text\">{{item.label}}</span>\r\n                        </a>\r\n                        <a *ngIf=\"item.routerLink\" [routerLink]=\"item.routerLink\" [routerLinkActive]=\"'ui-state-active'\" class=\"ui-menuitem-link ui-corner-all\" [attr.target]=\"item.target\"\r\n                            [ngClass]=\"{'ui-state-disabled':item.disabled}\" (click)=\"itemClick($event, item)\">\r\n                            <span class=\"ui-menuitem-icon fa fa-fw\" *ngIf=\"item.icon\" [ngClass]=\"item.icon\"></span>\r\n                            <span class=\"ui-menuitem-text\">{{item.label}}</span>\r\n                        </a>\r\n                    </li>\r\n                </ng-template>\r\n            </ul>\r\n        </div>\r\n    `,\r\n    providers: [DomHandler],\r\n    host: {'(window:resize)': 'onResize($event)'}\r\n})\r\nexport class Menu implements AfterViewInit,OnDestroy {\r\n\r\n    @Input() model: MenuItem[];\r\n\r\n    @Input() popup: boolean;\r\n\r\n    @Input() style: any;\r\n\r\n    @Input() styleClass: string;\r\n    \r\n    @Input() appendTo: any;\r\n    \r\n    @ViewChild('container') containerViewChild: ElementRef;\r\n    \r\n    container: HTMLDivElement;\r\n    \r\n    documentClickListener: any;\r\n    \r\n    preventDocumentDefault: any;\r\n\r\n    onResizeTarget: any;\r\n    \r\n    constructor(public el: ElementRef, public domHandler: DomHandler, public renderer: Renderer) {}\r\n\r\n    ngAfterViewInit() {\r\n        this.container = <HTMLDivElement> this.containerViewChild.nativeElement;\r\n        \r\n        if(this.popup) {\r\n            if(this.appendTo) {\r\n                if(this.appendTo === 'body')\r\n                    document.body.appendChild(this.container);\r\n                else\r\n                    this.domHandler.appendChild(this.container, this.appendTo);\r\n            }\r\n                \r\n            this.documentClickListener = this.renderer.listenGlobal('document', 'click', () => {\r\n                if(!this.preventDocumentDefault) {\r\n                    this.hide();\r\n                }\r\n                this.preventDocumentDefault = false;\r\n            });\r\n        }\r\n    }\r\n    \r\n    toggle(event) {\r\n        if(this.container.offsetParent)\r\n            this.hide();\r\n        else\r\n            this.show(event);\r\n            \r\n        this.preventDocumentDefault = true;\r\n    }\r\n\r\n    onResize(event) {\r\n        if(this.onResizeTarget && this.container.offsetParent) {\r\n            this.domHandler.absolutePosition(this.container, this.onResizeTarget);\r\n        }\r\n    }\r\n    \r\n    show(event) {\r\n        let target = event.currentTarget;\r\n        this.onResizeTarget = event.currentTarget;\r\n        this.container.style.display = 'block';\r\n        this.domHandler.absolutePosition(this.container, target);\r\n        this.domHandler.fadeIn(this.container, 250);\r\n    }\r\n    \r\n    hide() {\r\n        this.container.style.display = 'none';\r\n    }\r\n    \r\n    itemClick(event, item: MenuItem) {\r\n        if(item.disabled) {\r\n            event.preventDefault();\r\n            return;\r\n        }\r\n        \r\n        if(!item.url) {\r\n            event.preventDefault();\r\n        }\r\n        \r\n        if(item.command) {\r\n            if(!item.eventEmitter) {\r\n                item.eventEmitter = new EventEmitter();\r\n                item.eventEmitter.subscribe(item.command);\r\n            }\r\n            \r\n            item.eventEmitter.emit({\r\n                originalEvent: event,\r\n                item: item\r\n            });\r\n        }\r\n        \r\n        if(this.popup) {\r\n            this.hide();\r\n        }\r\n    }\r\n    \r\n    ngOnDestroy() {\r\n        if(this.popup) {\r\n            if(this.documentClickListener) {\r\n                this.documentClickListener();\r\n            }\r\n            \r\n            if(this.appendTo) {\r\n                this.el.nativeElement.appendChild(this.container);\r\n            }\r\n        }\r\n        \r\n        if(this.model) {\r\n            for(let item of this.model) {\r\n                this.unsubscribe(item);\r\n            }\r\n        }\r\n    }\r\n    \r\n    hasSubMenu(): boolean {\r\n        if(this.model) {\r\n            for(var item of this.model) {\r\n                if(item.items) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    \r\n    unsubscribe(item: any) {\r\n        if(item.eventEmitter) {\r\n            item.eventEmitter.unsubscribe();\r\n        }\r\n        \r\n        if(item.items) {\r\n            for(let childItem of item.items) {\r\n                this.unsubscribe(childItem);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n@NgModule({\r\n    imports: [CommonModule,RouterModule],\r\n    exports: [Menu,RouterModule],\r\n    declarations: [Menu]\r\n})\r\nexport class MenuModule { }"]}