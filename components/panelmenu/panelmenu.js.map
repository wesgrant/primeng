{"version":3,"file":"panelmenu.js","sourceRoot":"","sources":["panelmenu.ts"],"names":[],"mappings":"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","sourcesContent":["import {NgModule,Component,ElementRef,OnDestroy,Input,EventEmitter} from '@angular/core';\r\nimport {trigger,state,style,transition,animate} from '@angular/animations';\r\nimport {CommonModule} from '@angular/common';\r\nimport {MenuItem} from '../common/api';\r\nimport {RouterModule} from '@angular/router';\r\n\r\nexport class BasePanelMenuItem {\r\n        \r\n    handleClick(event, item) {\r\n        if(item.disabled) {\r\n            event.preventDefault();\r\n            return;\r\n        }\r\n        \r\n        item.expanded = !item.expanded;\r\n        \r\n        if(!item.url) {\r\n            event.preventDefault();\r\n        }\r\n                   \r\n        if(item.command) {\r\n            if(!item.eventEmitter) {\r\n                item.eventEmitter = new EventEmitter();\r\n                item.eventEmitter.subscribe(item.command);\r\n            }\r\n            \r\n            item.eventEmitter.emit({\r\n                originalEvent: event,\r\n                item: item\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\n@Component({\r\n    selector: 'p-panelMenuSub',\r\n    template: `\r\n        <ul class=\"ui-menu-list ui-helper-reset\" [style.display]=\"expanded ? 'block' : 'none'\">\r\n            <li *ngFor=\"let child of item.items\" class=\"ui-menuitem ui-corner-all\" [ngClass]=\"{'ui-menu-parent':child.items}\">\r\n                <a *ngIf=\"!child.routerLink\" [href]=\"child.url||'#'\" class=\"ui-menuitem-link ui-corner-all\" \r\n                    [ngClass]=\"{'ui-menuitem-link-hasicon':child.icon&&child.items,'ui-state-disabled':child.disabled}\" \r\n                    (click)=\"handleClick($event,child)\" [attr.target]=\"child.target\">\r\n                    <span class=\"ui-panelmenu-icon fa fa-fw\" [ngClass]=\"{'fa-caret-right':!child.expanded,'fa-caret-down':child.expanded}\" *ngIf=\"child.items\"></span\r\n                    ><span class=\"ui-menuitem-icon fa fa-fw\" [ngClass]=\"child.icon\" *ngIf=\"child.icon\"></span\r\n                    ><span class=\"ui-menuitem-text\">{{child.label}}</span>\r\n                </a>\r\n                <a *ngIf=\"child.routerLink\" [routerLink]=\"child.routerLink\" [routerLinkActive]=\"'ui-state-active'\" class=\"ui-menuitem-link ui-corner-all\" \r\n                    [ngClass]=\"{'ui-menuitem-link-hasicon':child.icon&&child.items,'ui-state-disabled':child.disabled}\" \r\n                    (click)=\"handleClick($event,child)\" [attr.target]=\"child.target\">\r\n                    <span class=\"ui-panelmenu-icon fa fa-fw\" [ngClass]=\"{'fa-caret-right':!child.expanded,'fa-caret-down':child.expanded}\" *ngIf=\"child.items\"></span\r\n                    ><span class=\"ui-menuitem-icon fa fa-fw\" [ngClass]=\"child.icon\" *ngIf=\"child.icon\"></span\r\n                    ><span class=\"ui-menuitem-text\">{{child.label}}</span>\r\n                </a>\r\n                <p-panelMenuSub [item]=\"child\" [expanded]=\"child.expanded\" *ngIf=\"child.items\"></p-panelMenuSub>\r\n            </li>\r\n        </ul>\r\n    `\r\n})\r\nexport class PanelMenuSub extends BasePanelMenuItem {\r\n    \r\n    @Input() item: MenuItem;\r\n    \r\n    @Input() expanded: boolean;\r\n}\r\n\r\n@Component({\r\n    selector: 'p-panelMenu',\r\n    template: `\r\n        <div [class]=\"styleClass\" [ngStyle]=\"style\" [ngClass]=\"'ui-panelmenu ui-widget'\">\r\n            <div *ngFor=\"let item of model;let f=first;let l=last;\" class=\"ui-panelmenu-panel\">\r\n                <div tabindex=\"0\" [ngClass]=\"{'ui-widget ui-panelmenu-header ui-state-default':true,'ui-corner-top':f,'ui-corner-bottom':l&&!item.expanded,\r\n                    'ui-state-active':item.expanded,'ui-state-disabled':item.disabled}\">\r\n                    <a *ngIf=\"!item.routerLink\" [href]=\"item.url||'#'\" [ngClass]=\"{'ui-panelmenu-headerlink-hasicon':item.icon}\" (click)=\"handleClick($event,item)\"\r\n                        [attr.target]=\"item.target\">\r\n                        <span *ngIf=\"item.items\" class=\"ui-panelmenu-icon fa\" [ngClass]=\"{'fa-caret-right':!item.expanded,'fa-caret-down':item.expanded}\"></span\r\n                        ><span class=\"ui-menuitem-icon fa\" [ngClass]=\"item.icon\" *ngIf=\"item.icon\"></span\r\n                        ><span class=\"ui-menuitem-text\">{{item.label}}</span>\r\n                    </a>\r\n                    <a *ngIf=\"item.routerLink\" [routerLink]=\"item.routerLink\" [routerLinkActive]=\"'ui-state-active'\" [ngClass]=\"{'ui-panelmenu-headerlink-hasicon':item.icon}\" (click)=\"handleClick($event,item)\"\r\n                        [attr.target]=\"item.target\">\r\n                        <span *ngIf=\"item.items\" class=\"ui-panelmenu-icon fa\" [ngClass]=\"{'fa-caret-right':!item.expanded,'fa-caret-down':item.expanded}\"></span\r\n                        ><span class=\"ui-menuitem-icon fa\" [ngClass]=\"item.icon\" *ngIf=\"item.icon\"></span\r\n                        ><span class=\"ui-menuitem-text\">{{item.label}}</span>\r\n                    </a>\r\n                </div>\r\n                <div *ngIf=\"item.items\" class=\"ui-panelmenu-content-wrapper\" [@rootItem]=\"item.expanded ? 'visible' : 'hidden'\" \r\n                    [ngClass]=\"{'ui-panelmenu-content-wrapper-overflown': !item.expanded||animating}\">\r\n                    <div class=\"ui-panelmenu-content ui-widget-content\">\r\n                        <p-panelMenuSub [item]=\"item\" [expanded]=\"true\"></p-panelMenuSub>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    `,\r\n    animations: [\r\n        trigger('rootItem', [\r\n            state('hidden', style({\r\n                height: '0px'\r\n            })),\r\n            state('visible', style({\r\n                height: '*'\r\n            })),\r\n            transition('visible => hidden', animate('400ms cubic-bezier(0.86, 0, 0.07, 1)')),\r\n            transition('hidden => visible', animate('400ms cubic-bezier(0.86, 0, 0.07, 1)'))\r\n        ])\r\n    ]\r\n})\r\nexport class PanelMenu extends BasePanelMenuItem {\r\n    \r\n    @Input() model: MenuItem[];\r\n\r\n    @Input() style: any;\r\n\r\n    @Input() styleClass: string;\r\n    \r\n    public animating: boolean;\r\n                \r\n    unsubscribe(item: any) {\r\n        if(item.eventEmitter) {\r\n            item.eventEmitter.unsubscribe();\r\n        }\r\n        \r\n        if(item.items) {\r\n            for(let childItem of item.items) {\r\n                this.unsubscribe(childItem);\r\n            }\r\n        }\r\n    }\r\n            \r\n    ngOnDestroy() {        \r\n        if(this.model) {\r\n            for(let item of this.model) {\r\n                this.unsubscribe(item);\r\n            }\r\n        }\r\n    }\r\n    \r\n    handleClick(event, item) {\r\n        this.animating = true;\r\n        super.handleClick(event, item);\r\n        //TODO: Use onDone of animate callback instead with RC6\r\n        setTimeout(() => {\r\n            this.animating = false;\r\n        }, 400);\r\n    }\r\n\r\n}\r\n\r\n@NgModule({\r\n    imports: [CommonModule,RouterModule],\r\n    exports: [PanelMenu,RouterModule],\r\n    declarations: [PanelMenu,PanelMenuSub]\r\n})\r\nexport class PanelMenuModule { }\r\n"]}