{"version":3,"file":"listbox.js","sourceRoot":"","sources":["listbox.ts"],"names":[],"mappings":"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","sourcesContent":["import {NgModule,Component,ElementRef,Input,Output,EventEmitter,AfterContentInit,ContentChildren,QueryList,TemplateRef,IterableDiffers,forwardRef} from '@angular/core';\r\nimport {CommonModule} from '@angular/common';\r\nimport {SelectItem} from '../common/api';\r\nimport {SharedModule,PrimeTemplate} from '../common/shared';\r\nimport {DomHandler} from '../dom/domhandler';\r\nimport {ObjectUtils} from '../utils/ObjectUtils';\r\nimport {NG_VALUE_ACCESSOR, ControlValueAccessor} from '@angular/forms';\r\n\r\nexport const LISTBOX_VALUE_ACCESSOR: any = {\r\n    provide: NG_VALUE_ACCESSOR,\r\n    useExisting: forwardRef(() => Listbox),\r\n    multi: true\r\n};\r\n\r\n@Component({\r\n    selector: 'p-listbox',\r\n    template: `\r\n        <div [ngClass]=\"{'ui-listbox ui-inputtext ui-widget ui-widget-content ui-corner-all':true,'ui-state-disabled':disabled}\" [ngStyle]=\"style\" [class]=\"styleClass\">\r\n            <div class=\"ui-widget-header ui-corner-all ui-listbox-header ui-helper-clearfix\" *ngIf=\"(checkbox && multiple) || filter\">\r\n                <div class=\"ui-chkbox ui-widget\" *ngIf=\"checkbox && multiple\">\r\n                    <div class=\"ui-helper-hidden-accessible\">\r\n                        <input #cb type=\"checkbox\" readonly=\"readonly\" [checked]=\"isAllChecked()\">\r\n                    </div>\r\n                    <div class=\"ui-chkbox-box ui-widget ui-corner-all ui-state-default\" [ngClass]=\"{'ui-state-active':isAllChecked()}\" (click)=\"toggleAll($event,cb)\">\r\n                        <span class=\"ui-chkbox-icon ui-c\" [ngClass]=\"{'fa fa-check':isAllChecked()}\"></span>\r\n                    </div>\r\n                </div>\r\n                <div class=\"ui-listbox-filter-container\" *ngIf=\"filter\">\r\n                    <input type=\"text\" role=\"textbox\" (input)=\"onFilter($event)\" class=\"ui-inputtext ui-widget ui-state-default ui-corner-all\" [disabled]=\"disabled\">\r\n                    <span class=\"fa fa-search\"></span>\r\n                </div>\r\n            </div>\r\n            <ul class=\"ui-listbox-list\">\r\n                <li *ngFor=\"let option of options\" [style.display]=\"isItemVisible(option) ? 'block' : 'none'\"\r\n                    [ngClass]=\"{'ui-listbox-item ui-corner-all':true,'ui-state-highlight':isSelected(option)}\"\r\n                    (click)=\"onOptionClick($event,option)\" (dblclick)=\"onDoubleClick($event,option)\" (touchend)=\"onOptionTouchEnd($event,option)\">\r\n                    <div class=\"ui-chkbox ui-widget\" *ngIf=\"checkbox && multiple\" (click)=\"onCheckboxClick($event,option)\">\r\n                        <div class=\"ui-helper-hidden-accessible\">\r\n                            <input type=\"checkbox\" [checked]=\"isSelected(option)\" [disabled]=\"disabled\">\r\n                        </div>\r\n                        <div class=\"ui-chkbox-box ui-widget ui-corner-all ui-state-default\" [ngClass]=\"{'ui-state-active':isSelected(option)}\">\r\n                            <span class=\"ui-chkbox-icon ui-c\" [ngClass]=\"{'fa fa-check':isSelected(option)}\"></span>\r\n                        </div>\r\n                    </div>\r\n                    <span *ngIf=\"!itemTemplate\">{{option.label}}</span>\r\n                    <ng-template *ngIf=\"itemTemplate\" [pTemplateWrapper]=\"itemTemplate\" [item]=\"option\"></ng-template>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    `,\r\n    providers: [DomHandler,ObjectUtils,LISTBOX_VALUE_ACCESSOR]\r\n})\r\nexport class Listbox implements AfterContentInit,ControlValueAccessor {\r\n\r\n    @Input() options: SelectItem[];\r\n\r\n    @Input() multiple: boolean;\r\n\r\n    @Input() style: any;\r\n\r\n    @Input() styleClass: string;\r\n\r\n    @Input() disabled: boolean;\r\n\r\n    @Input() checkbox: boolean = false;\r\n\r\n    @Input() filter: boolean = false;\r\n    \r\n    @Input() metaKeySelection: boolean = true;\r\n    \r\n    @Input() dataKey: string;\r\n\r\n    @Output() onChange: EventEmitter<any> = new EventEmitter();\r\n\r\n    @Output() onDblClick: EventEmitter<any> = new EventEmitter();\r\n\r\n    @ContentChildren(PrimeTemplate) templates: QueryList<any>;\r\n    \r\n    public itemTemplate: TemplateRef<any>;\r\n\r\n    public filterValue: string;\r\n    \r\n    public visibleOptions: SelectItem[];\r\n\r\n    public filtered: boolean;\r\n\r\n    public value: any;\r\n\r\n    public onModelChange: Function = () => { };\r\n\r\n    public onModelTouched: Function = () => { };\r\n\r\n    public checkboxClick: boolean;\r\n    \r\n    public optionTouched: boolean;\r\n\r\n    constructor(public el: ElementRef, public domHandler: DomHandler, public objectUtils: ObjectUtils) {}\r\n    \r\n    ngAfterContentInit() {\r\n        this.templates.forEach((item) => {\r\n            switch(item.getType()) {\r\n                case 'item':\r\n                    this.itemTemplate = item.template;\r\n                break;\r\n                \r\n                default:\r\n                    this.itemTemplate = item.template;\r\n                break;\r\n            }\r\n        });\r\n    }\r\n\r\n    writeValue(value: any): void {\r\n        this.value = value;\r\n    }\r\n\r\n    registerOnChange(fn: Function): void {\r\n        this.onModelChange = fn;\r\n    }\r\n\r\n    registerOnTouched(fn: Function): void {\r\n        this.onModelTouched = fn;\r\n    }\r\n\r\n    setDisabledState(val: boolean): void {\r\n        this.disabled = val;\r\n    }\r\n\r\n    onOptionClick(event, option) {\r\n        if(this.disabled) {\r\n            return;\r\n        }\r\n        \r\n        if(!this.checkboxClick) {\r\n            if(this.multiple)\r\n                this.onOptionClickMultiple(event, option);\r\n            else\r\n                this.onOptionClickSingle(event, option);\r\n        }\r\n        else {\r\n            this.checkboxClick = false;\r\n        }\r\n        \r\n        this.optionTouched = false;\r\n    }\r\n    \r\n    onOptionTouchEnd(event, option) {\r\n        if(this.disabled) {\r\n            return;\r\n        }\r\n        \r\n        this.optionTouched = true;\r\n    }\r\n\r\n    onOptionClickSingle(event, option) {        \r\n        let selected = this.isSelected(option);\r\n        let valueChanged = false;\r\n        let metaSelection = this.optionTouched ? false : this.metaKeySelection;\r\n\r\n        if(metaSelection) {\r\n            let metaKey = (event.metaKey || event.ctrlKey);\r\n            \r\n            if(selected) {\r\n                if(metaKey) {\r\n                    this.value = null;\r\n                    valueChanged = true;\r\n                }\r\n            }\r\n            else {\r\n                this.value = option.value;\r\n                valueChanged = true;\r\n            }\r\n        }\r\n        else {\r\n            this.value = selected ? null : option.value;            \r\n            valueChanged = true;\r\n        }\r\n\r\n        if(valueChanged) {\r\n            this.onModelChange(this.value);\r\n            this.onChange.emit({\r\n                originalEvent: event,\r\n                value: this.value\r\n            });\r\n        }\r\n    }\r\n\r\n    onOptionClickMultiple(event, option) {        \r\n        let selected = this.isSelected(option);\r\n        let valueChanged = false;\r\n        let metaSelection = this.optionTouched ? false : this.metaKeySelection;\r\n\r\n        if(metaSelection) {\r\n            let metaKey = (event.metaKey || event.ctrlKey);\r\n            \r\n            if(selected) {\r\n                if(metaKey) {\r\n                    this.removeOption(option);\r\n                }\r\n                else {\r\n                    this.value = [option.value];\r\n                }\r\n                valueChanged = true;\r\n            }\r\n            else {\r\n                this.value = (metaKey) ? this.value || [] : [];\r\n                this.value = [...this.value, option.value];\r\n                valueChanged = true;\r\n            }\r\n        }\r\n        else {\r\n            if(selected) {\r\n                this.removeOption(option);\r\n            }\r\n            else {\r\n                this.value = [...this.value||[],option.value];\r\n            }\r\n            \r\n            valueChanged = true;\r\n        }\r\n\r\n        if (valueChanged) {\r\n            this.onModelChange(this.value);\r\n            this.onChange.emit({\r\n                originalEvent: event,\r\n                value: this.value\r\n            });\r\n        }\r\n    }\r\n    \r\n    removeOption(option: any): void {\r\n        this.value = this.value.filter(val => !this.objectUtils.equals(val, option.value, this.dataKey));\r\n    }\r\n\r\n    isSelected(option: SelectItem) {\r\n        let selected = false;\r\n\r\n        if(this.multiple) {\r\n            if(this.value) {\r\n                for(let val of this.value) {\r\n                    if(this.objectUtils.equals(val, option.value, this.dataKey)) {\r\n                        selected = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            selected = this.objectUtils.equals(this.value, option.value, this.dataKey);\r\n        }\r\n\r\n        return selected;\r\n    }\r\n\r\n    isAllChecked() {\r\n        if(this.filterValue && this.filterValue.trim().length)\r\n            return this.value&&this.visibleOptions&&this.visibleOptions.length&&(this.value.length == this.visibleOptions.length);\r\n        else\r\n            return this.value&&this.options&&(this.value.length == this.options.length);\r\n    } \r\n\r\n    onFilter(event) {\r\n        this.filterValue = event.target.value.trim().toLowerCase();\r\n        this.visibleOptions = [];\r\n        for(let i = 0; i < this.options.length; i++) {\r\n            let option = this.options[i];\r\n            if(option.label.toLowerCase().indexOf(this.filterValue.toLowerCase()) > -1) {\r\n                this.visibleOptions.push(option);\r\n            }\r\n        }\r\n        this.filtered = true;\r\n    }\r\n\r\n    toggleAll(event, checkbox) {\r\n        if(this.disabled) {\r\n            return;\r\n        }\r\n        \r\n        if(checkbox.checked) {\r\n            this.value = [];\r\n        }\r\n        else {\r\n            let opts = this.getVisibleOptions();\r\n            if(opts) {\r\n                this.value = [];\r\n                for(let i = 0; i < opts.length; i++) {\r\n                    this.value.push(opts[i].value);\r\n                } \r\n            }\r\n        }\r\n        checkbox.checked = !checkbox.checked;\r\n        this.onModelChange(this.value);\r\n        this.onChange.emit({originalEvent: event, value: this.value});\r\n    } \r\n\r\n    getVisibleOptions(): SelectItem[] {\r\n        if(this.filterValue && this.filterValue.trim().length) {\r\n            let items = [];\r\n            for(let i = 0; i < this.options.length; i++) {\r\n                let option = this.options[i];\r\n                if(option.label.toLowerCase().includes(this.filterValue.toLowerCase())) {\r\n                    items.push(option);\r\n                }\r\n            }\r\n            return items;\r\n        }\r\n        else {\r\n            return this.options;\r\n        }\r\n    }\r\n\r\n    isItemVisible(option: SelectItem): boolean {\r\n        if(this.filterValue && this.filterValue.trim().length) {\r\n            for(let i = 0; i < this.visibleOptions.length; i++) {\r\n                if(this.visibleOptions[i].value == option.value) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    onDoubleClick(event: Event, option: SelectItem): any {\r\n        if(this.disabled) {\r\n            return;\r\n        }\r\n        \r\n        this.onDblClick.emit({\r\n            originalEvent: event,\r\n            value: this.value\r\n        })\r\n    }\r\n    \r\n    onCheckboxClick(event: Event, option: SelectItem) {\r\n        if(this.disabled) {\r\n            return;\r\n        }\r\n        \r\n        this.checkboxClick = true;\r\n        let selected = this.isSelected(option);\r\n\r\n        if(selected) {\r\n            this.removeOption(option);\r\n        }\r\n        else {\r\n            this.value = this.value ? this.value : [];\r\n            this.value = [...this.value,option.value];\r\n        }\r\n\r\n        this.onModelChange(this.value);\r\n        this.onChange.emit({\r\n            originalEvent: event,\r\n            value: this.value\r\n        });\r\n    }\r\n}\r\n\r\n@NgModule({\r\n    imports: [CommonModule, SharedModule],\r\n    exports: [Listbox, SharedModule],\r\n    declarations: [Listbox]\r\n})\r\nexport class ListboxModule { }\r\n"]}