{"version":3,"file":"accordion.js","sourceRoot":"","sources":["accordion.ts"],"names":[],"mappings":"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","sourcesContent":["import {NgModule,Component,ElementRef,AfterContentInit,Input,Output,EventEmitter,ContentChildren,QueryList} from '@angular/core';\r\nimport {trigger,state,style,transition,animate} from '@angular/animations';\r\nimport {CommonModule} from '@angular/common';\r\nimport {Header} from '../common/shared';\r\nimport {BlockableUI} from '../common/api';\r\n\r\n@Component({\r\n    selector: 'p-accordion',\r\n    template: `\r\n        <div [ngClass]=\"'ui-accordion ui-widget ui-helper-reset'\" [ngStyle]=\"style\" [class]=\"styleClass\">\r\n            <ng-content></ng-content>\r\n        </div>\r\n    `,\r\n})\r\nexport class Accordion implements BlockableUI {\r\n    \r\n    @Input() multiple: boolean;\r\n    \r\n    @Output() onClose: EventEmitter<any> = new EventEmitter();\r\n\r\n    @Output() onOpen: EventEmitter<any> = new EventEmitter();\r\n\r\n    @Input() style: any;\r\n    \r\n    @Input() styleClass: string;\r\n    \r\n    @Input() lazy: boolean;\r\n    \r\n    public tabs: AccordionTab[] = [];\r\n\r\n    constructor(public el: ElementRef) {}\r\n\r\n    addTab(tab: AccordionTab) {\r\n        this.tabs.push(tab);\r\n    }   \r\n    \r\n    getBlockableElement(): HTMLElementÂ {\r\n        return this.el.nativeElement.children[0];\r\n    } \r\n}\r\n\r\n@Component({\r\n    selector: 'p-accordionTab',\r\n    template: `\r\n        <div class=\"ui-accordion-header ui-state-default ui-corner-all\" [ngClass]=\"{'ui-state-active': selected,'ui-state-disabled':disabled}\"\r\n            (click)=\"toggle($event)\">\r\n            <span class=\"fa fa-fw\" [ngClass]=\"{'fa-caret-down': selected, 'fa-caret-right': !selected}\"></span>\r\n            <a href=\"#\" *ngIf=\"!hasHeaderFacet\" role=\"tab\" [attr.aria-expanded]=\"selected\" [attr.aria-selected]=\"selected\">{{header}}</a>\r\n            <a href=\"#\" *ngIf=\"hasHeaderFacet\" role=\"tab\" [attr.aria-expanded]=\"selected\" [attr.aria-selected]=\"selected\">\r\n                <ng-content select=\"p-header\"></ng-content>\r\n            </a>\r\n        </div>\r\n        <div class=\"ui-accordion-content-wrapper\" [@tabContent]=\"selected ? 'visible' : 'hidden'\" (@tabContent.done)=\"onToggleDone($event)\"\r\n            [ngClass]=\"{'ui-accordion-content-wrapper-overflown': !selected||animating}\" role=\"tabpanel\" [attr.aria-hidden]=\"!selected\">\r\n            <div class=\"ui-accordion-content ui-widget-content\" *ngIf=\"lazy ? selected : true\">\r\n                <ng-content></ng-content>\r\n            </div>\r\n        </div>\r\n    `,\r\n    animations: [\r\n        trigger('tabContent', [\r\n            state('hidden', style({\r\n                height: '0'\r\n            })),\r\n            state('visible', style({\r\n                height: '*'\r\n            })),\r\n            transition('visible <=> hidden', animate('400ms cubic-bezier(0.86, 0, 0.07, 1)'))\r\n        ])\r\n    ]\r\n})\r\nexport class AccordionTab {\r\n\r\n    @Input() header: string;\r\n\r\n    @Input() selected: boolean;\r\n\r\n    @Input() disabled: boolean;\r\n    \r\n    @Output() selectedChange: EventEmitter<any> = new EventEmitter();\r\n\r\n    @ContentChildren(Header) headerFacet: QueryList<AccordionTab>;\r\n    \r\n    public animating: boolean;\r\n    \r\n    constructor(public accordion: Accordion) {\r\n        this.accordion.addTab(this);\r\n    }\r\n\r\n    toggle(event) {\r\n        if(this.disabled || this.animating) {\r\n            return false;\r\n        }\r\n        \r\n        this.animating = true;\r\n        let index = this.findTabIndex();\r\n\r\n        if(this.selected) {\r\n            this.selected = false;\r\n            this.accordion.onClose.emit({originalEvent: event, index: index});\r\n        }\r\n        else {\r\n            if(!this.accordion.multiple) {\r\n                for(var i = 0; i < this.accordion.tabs.length; i++) {\r\n                    this.accordion.tabs[i].selected = false;\r\n                    this.accordion.tabs[i].selectedChange.emit(false);\r\n                }\r\n            }\r\n\r\n            this.selected = true;\r\n            this.accordion.onOpen.emit({originalEvent: event, index: index});\r\n        }\r\n        \r\n        this.selectedChange.emit(this.selected);\r\n        \r\n        event.preventDefault();\r\n    }\r\n\r\n    findTabIndex() {\r\n        let index = -1;\r\n        for(var i = 0; i < this.accordion.tabs.length; i++) {\r\n            if(this.accordion.tabs[i] == this) {\r\n                index = i;\r\n                break;\r\n            }\r\n        }\r\n        return index;\r\n    }\r\n    \r\n    get lazy(): boolean {\r\n        return this.accordion.lazy;\r\n    }\r\n    \r\n    get hasHeaderFacet(): boolean {\r\n        return this.headerFacet && this.headerFacet.length > 0;\r\n    }\r\n    \r\n    onToggleDone(event: Event) {\r\n        this.animating = false;\r\n    }\r\n}\r\n\r\n@NgModule({\r\n    imports: [CommonModule],\r\n    exports: [Accordion,AccordionTab],\r\n    declarations: [Accordion,AccordionTab]\r\n})\r\nexport class AccordionModule { }\r\n"]}