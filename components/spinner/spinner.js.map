{"version":3,"file":"spinner.js","sourceRoot":"","sources":["spinner.ts"],"names":[],"mappings":"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","sourcesContent":["import {NgModule,Component,ElementRef,OnInit,Input,Output,EventEmitter,forwardRef} from '@angular/core';\r\nimport {CommonModule} from '@angular/common';\r\nimport {InputTextModule} from '../inputtext/inputtext';\r\nimport {DomHandler} from '../dom/domhandler';\r\nimport {NG_VALUE_ACCESSOR, ControlValueAccessor} from '@angular/forms';\r\n\r\nexport const SPINNER_VALUE_ACCESSOR: any = {\r\n  provide: NG_VALUE_ACCESSOR,\r\n  useExisting: forwardRef(() => Spinner),\r\n  multi: true\r\n};\r\n\r\n@Component({\r\n    selector: 'p-spinner',\r\n    template: `\r\n        <span class=\"ui-spinner ui-widget ui-corner-all\">\r\n            <input #in type=\"text\" [attr.id]=\"inputId\" class=\"ui-spinner-input\" [value]=\"valueAsString\" class=\"ui-inputtext ui-widget ui-state-default ui-corner-all\"\r\n            [attr.size]=\"size\" [attr.maxlength]=\"maxlength\" [attr.tabindex]=\"tabindex\" [attr.placeholder]=\"placeholder\" [disabled]=\"disabled\" [readonly]=\"readonly\"\r\n            (keydown)=\"onInputKeydown($event)\" (keyup)=\"onInput($event,in.value)\" (keypress)=\"onInputKeyPress($event)\" (blur)=\"onBlur()\" (change)=\"handleChange($event)\" (focus)=\"onFocus()\">\r\n            <button type=\"button\" [ngClass]=\"{'ui-spinner-button ui-spinner-up ui-corner-tr ui-button ui-widget ui-state-default':true,'ui-state-disabled':disabled}\" [disabled]=\"disabled\"\r\n                (mouseleave)=\"onUpButtonMouseleave($event)\" (mousedown)=\"onUpButtonMousedown($event,in)\" (mouseup)=\"onUpButtonMouseup($event)\">\r\n                <span class=\"fa fa-caret-up\"></span>\r\n            </button>\r\n            <button type=\"button\" [ngClass]=\"{'ui-spinner-button ui-spinner-down ui-corner-br ui-button ui-widget ui-state-default':true,'ui-state-disabled':disabled}\" [disabled]=\"disabled\"\r\n                (mouseleave)=\"onDownButtonMouseleave($event)\" (mousedown)=\"onDownButtonMousedown($event,in)\" (mouseup)=\"onDownButtonMouseup($event)\">\r\n                <span class=\"fa fa-caret-down\"></span>\r\n            </button>\r\n        </span>\r\n    `,\r\n    host: {\r\n        '[class.ui-inputwrapper-filled]': 'filled',\r\n        '[class.ui-inputwrapper-focus]': 'focus'\r\n    },\r\n    providers: [DomHandler,SPINNER_VALUE_ACCESSOR],\r\n})\r\nexport class Spinner implements OnInit,ControlValueAccessor {\r\n        \r\n    @Output() onChange: EventEmitter<any> = new EventEmitter();\r\n\r\n    @Input() step: number = 1;\r\n\r\n    @Input() min: number;\r\n\r\n    @Input() max: number;\r\n    \r\n    @Input() maxlength: number;\r\n    \r\n    @Input() size: number;\r\n\r\n    @Input() placeholder: string;\r\n\r\n    @Input() inputId: string;\r\n\r\n    @Input() disabled: boolean;\r\n    \r\n    @Input() readonly: boolean;\r\n    \r\n    @Input() decimalSeparator: string = '.';\r\n    \r\n    @Input() thousandSeparator: string = ',';\r\n\r\n    @Input() tabindex: number;\r\n    \r\n    @Input() formatInput: boolean = true;\r\n            \r\n    value: number;\r\n    \r\n    valueAsString: string = '';\r\n    \r\n    onModelChange: Function = () => {};\r\n    \r\n    onModelTouched: Function = () => {};\r\n        \r\n    keyPattern: RegExp = /[0-9\\+\\-]/;\r\n        \r\n    public precision: number;\r\n    \r\n    public timer: any;\r\n        \r\n    public focus: boolean;\r\n    \r\n    public filled: boolean;\r\n    \r\n    constructor(public el: ElementRef, public domHandler: DomHandler) {}\r\n    \r\n    ngOnInit() {\r\n        if(Math.floor(this.step) === 0) {\r\n            this.precision = this.step.toString().split(/[,]|[.]/)[1].length;\r\n        }\r\n    }\r\n    \r\n    repeat(interval: number, dir: number) {\r\n        let i = interval||500;\r\n\r\n        this.clearTimer();\r\n        this.timer = setTimeout(() => {\r\n            this.repeat(40, dir);\r\n        }, i);\r\n\r\n        this.spin(dir);\r\n    }\r\n    \r\n    spin(dir: number) {\r\n        let step = this.step * dir;\r\n        let currentValue = this.value||0;\r\n        let newValue: number = null;\r\n        \r\n        if(this.precision)\r\n            this.value = parseFloat(this.toFixed(currentValue + step, this.precision));\r\n        else\r\n            this.value = currentValue + step;\r\n    \r\n        if(this.maxlength !== undefined && this.value.toString().length > this.maxlength) {\r\n            this.value = currentValue;\r\n        }\r\n    \r\n        if(this.min !== undefined && this.value < this.min) {\r\n            this.value = this.min;\r\n        }\r\n\r\n        if(this.max !== undefined && this.value > this.max) {\r\n            this.value = this.max;\r\n        }\r\n        \r\n        this.formatValue();\r\n        this.onModelChange(this.value);\r\n        this.onChange.emit();\r\n    }\r\n    \r\n    toFixed(value: number, precision: number) {\r\n        let power = Math.pow(10, precision||0);\r\n        return String(Math.round(value * power) / power);\r\n    }\r\n    \r\n    onUpButtonMousedown(event: Event,input: HTMLInputElement) {\r\n        if(!this.disabled) {\r\n            input.focus();\r\n            this.repeat(null, 1);\r\n            this.updateFilledState();\r\n        }\r\n    }\r\n    \r\n    onUpButtonMouseup(event: Event) {\r\n        if(!this.disabled) {\r\n            this.clearTimer();\r\n        }        \r\n    }\r\n        \r\n    onUpButtonMouseleave(event: Event) {\r\n        if(!this.disabled) {\r\n            this.clearTimer();\r\n        }\r\n    }\r\n    \r\n    onDownButtonMousedown(event: Event, input: HTMLInputElement) {\r\n        if(!this.disabled) {\r\n            input.focus();\r\n            this.repeat(null, -1);\r\n            this.updateFilledState();\r\n        }\r\n    }\r\n    \r\n    onDownButtonMouseup(event: Event) {\r\n        if(!this.disabled) {\r\n            this.clearTimer();\r\n        }\r\n    }\r\n        \r\n    onDownButtonMouseleave(event: Event) {\r\n        if(!this.disabled) {\r\n            this.clearTimer();\r\n        }\r\n    }\r\n    \r\n    onInputKeydown(event: KeyboardEvent) {  \r\n        if(event.which == 38) {\r\n            this.spin(1);\r\n            event.preventDefault();\r\n        }\r\n        else if(event.which == 40) {\r\n            this.spin(-1);\r\n            event.preventDefault();\r\n        }\r\n    }\r\n    \r\n    onInputKeyPress(event: KeyboardEvent) {\r\n        let inputChar = String.fromCharCode(event.charCode);\r\n        if(!this.keyPattern.test(inputChar) && inputChar != this.decimalSeparator && event.keyCode != 9 && event.keyCode != 8 && event.keyCode != 37 && event.keyCode != 39 && event.keyCode != 46) {\r\n            event.preventDefault();\r\n        }    \r\n    }\r\n\r\n    onInput(event: Event, inputValue: string) {\r\n        this.value = this.parseValue(inputValue);\r\n        this.formatValue();       \r\n        this.onModelChange(this.value);\r\n        this.updateFilledState();\r\n    }\r\n    \r\n    onBlur() {\r\n        this.onModelTouched();\r\n        this.focus = false;\r\n    }\r\n    \r\n    onFocus() {\r\n        this.focus = true;\r\n    }\r\n    \r\n    parseValue(val: string): number {\r\n        let value: number;\r\n        \r\n        if(this.formatInput) {\r\n            val = val.split(this.thousandSeparator).join('');\r\n        }\r\n        \r\n        if(val.trim() === '') {\r\n            value= this.min !== undefined ? this.min : null;\r\n        }\r\n        else {        \r\n            if(this.precision) {\r\n                value = parseFloat(val.replace(',','.'));\r\n            }\r\n            else {\r\n                value = parseInt(val);\r\n            }\r\n                            \r\n            if(!isNaN(value)) {\r\n                if(this.max !== undefined && value > this.max) {\r\n                    value = this.max;\r\n                }\r\n                \r\n                if(this.min !== undefined && value < this.min) {\r\n                    value = this.min;\r\n                }\r\n            }\r\n            else {\r\n                value = null;\r\n            }\r\n        }\r\n        \r\n        return value;\r\n    }\r\n    \r\n    formatValue(): void {\r\n        if(this.value !== null && this.value !== undefined) {\r\n            let textValue = String(this.value).replace('.', this.decimalSeparator);\r\n            \r\n            if(this.formatInput) {\r\n                textValue = textValue.replace(/\\B(?=(\\d{3})+(?!\\d))/g, this.thousandSeparator);\r\n            }\r\n            this.valueAsString = textValue;\r\n        }\r\n        else {\r\n            this.valueAsString = '';\r\n        }\r\n    }\r\n    \r\n    handleChange(event: Event) {\r\n        this.onChange.emit(event);\r\n    }\r\n        \r\n    clearTimer() {\r\n        if(this.timer) {\r\n            clearInterval(this.timer);\r\n        }\r\n    }\r\n    \r\n    writeValue(value: any) : void {\r\n        this.value = value;    \r\n        this.formatValue();    \r\n        this.updateFilledState();\r\n    }\r\n    \r\n    registerOnChange(fn: Function): void {\r\n        this.onModelChange = fn;\r\n    }\r\n\r\n    registerOnTouched(fn: Function): void {\r\n        this.onModelTouched = fn;\r\n    }\r\n    \r\n    setDisabledState(val: boolean): void {\r\n        this.disabled = val;\r\n    }\r\n    \r\n    updateFilledState() {\r\n        this.filled = (this.value !== undefined && this.value != null);\r\n    }\r\n}\r\n\r\n\r\n@NgModule({\r\n    imports: [CommonModule,InputTextModule],\r\n    exports: [Spinner],\r\n    declarations: [Spinner]\r\n})\r\nexport class SpinnerModule { }\r\n"]}