{"version":3,"file":"galleria.js","sourceRoot":"","sources":["galleria.ts"],"names":[],"mappings":"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","sourcesContent":["import {NgModule,Component,ElementRef,AfterViewChecked,AfterViewInit,OnDestroy,Input,Output,EventEmitter} from '@angular/core';\r\nimport {CommonModule} from '@angular/common';\r\nimport {DomHandler} from '../dom/domhandler';\r\n\r\n@Component({\r\n    selector: 'p-galleria',\r\n    template: `\r\n        <div [ngClass]=\"{'ui-galleria ui-widget ui-widget-content ui-corner-all':true}\" [ngStyle]=\"style\" [class]=\"styleClass\" [style.width.px]=\"panelWidth\">\r\n            <ul class=\"ui-galleria-panel-wrapper\" [style.width.px]=\"panelWidth\" [style.height.px]=\"panelHeight\">\r\n                <li *ngFor=\"let image of images;let i=index\" class=\"ui-galleria-panel\" [ngClass]=\"{'ui-helper-hidden':i!=activeIndex}\"\r\n                    [style.width.px]=\"panelWidth\" [style.height.px]=\"panelHeight\" (click)=\"clickImage($event,image,i)\">\r\n                    <img class=\"ui-panel-images\" [src]=\"image.source\" [alt]=\"image.alt\" [title]=\"image.title\"/>\r\n                </li>\r\n            </ul>\r\n            <div [ngClass]=\"{'ui-galleria-filmstrip-wrapper':true}\" *ngIf=\"showFilmstrip\">\r\n                <ul class=\"ui-galleria-filmstrip\" style=\"transition:left 1s\" [style.left.px]=\"stripLeft\">\r\n                    <li #frame *ngFor=\"let image of images;let i=index\" [ngClass]=\"{'ui-galleria-frame-active':i==activeIndex}\" class=\"ui-galleria-frame\" (click)=\"frameClick(frame)\"\r\n                        [style.width.px]=\"frameWidth\" [style.height.px]=\"frameHeight\" [style.transition]=\"'opacity 0.75s ease'\">\r\n                        <div class=\"ui-galleria-frame-content\">\r\n                            <img [src]=\"image.source\" [alt]=\"image.alt\" [title]=\"image.title\" class=\"ui-galleria-frame-image\"\r\n                                [style.width.px]=\"frameWidth\" [style.height.px]=\"frameHeight\">\r\n                        </div>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <div class=\"ui-galleria-nav-prev fa fa-fw fa-chevron-circle-left\" (click)=\"clickNavLeft()\" [style.bottom.px]=\"frameHeight/2\" *ngIf=\"activeIndex !== 0\"></div>\r\n            <div class=\"ui-galleria-nav-next fa fa-fw fa-chevron-circle-right\" (click)=\"clickNavRight()\" [style.bottom.px]=\"frameHeight/2\"></div>\r\n            <div class=\"ui-galleria-caption\" *ngIf=\"showCaption&&images\" style=\"display:block\">\r\n                <h4>{{images[activeIndex]?.title}}</h4><p>{{images[activeIndex]?.alt}}</p>\r\n            </div>\r\n        </div>\r\n    `,\r\n    providers: [DomHandler]\r\n})\r\nexport class Galleria implements AfterViewChecked,AfterViewInit,OnDestroy {\r\n        \r\n    @Input() style: any;\r\n\r\n    @Input() styleClass: string;\r\n\r\n    @Input() panelWidth: number = 600;\r\n\r\n    @Input() panelHeight: number = 400;\r\n\r\n    @Input() frameWidth: number = 60;\r\n    \r\n    @Input() frameHeight: number = 40;\r\n\r\n    @Input() activeIndex: number = 0;\r\n\r\n    @Input() showFilmstrip: boolean = true;\r\n\r\n    @Input() autoPlay: boolean = true;\r\n\r\n    @Input() transitionInterval: number = 4000;\r\n\r\n    @Input() showCaption: boolean = true;\r\n    \r\n    @Output() onImageClicked = new EventEmitter();\r\n    \r\n    _images: any[];\r\n    \r\n    slideshowActive: boolean;\r\n    \r\n    public container: any;\r\n    \r\n    public panelWrapper: any;\r\n    \r\n    public panels: any;\r\n    \r\n    public caption: any;\r\n    \r\n    public stripWrapper: any;\r\n    \r\n    public strip: any;\r\n    \r\n    public frames: any;\r\n    \r\n    public interval: any;\r\n    \r\n    public stripLeft: number = 0;\r\n    \r\n    public imagesChanged: boolean;\r\n    \r\n    public initialized: boolean;\r\n\r\n    constructor(public el: ElementRef, public domHandler: DomHandler) {}\r\n    \r\n    ngAfterViewChecked() {\r\n        if(this.imagesChanged) {\r\n            this.stopSlideshow();\r\n            this.render();\r\n            this.imagesChanged = false;\r\n        }\r\n    }\r\n    \r\n    @Input() get images(): any[] {\r\n        return this._images;\r\n    }\r\n\r\n    set images(value:any[]) {\r\n        this._images = value;\r\n        this.activeIndex = 0;\r\n        this.imagesChanged = true;\r\n    }\r\n        \r\n    ngAfterViewInit() {\r\n        this.container = this.el.nativeElement.children[0];\r\n        this.panelWrapper = this.domHandler.findSingle(this.el.nativeElement, 'ul.ui-galleria-panel-wrapper');\r\n        this.initialized = true;\r\n        \r\n        if(this.showFilmstrip) {\r\n            this.stripWrapper = this.domHandler.findSingle(this.container,'div.ui-galleria-filmstrip-wrapper');\r\n            this.strip = this.domHandler.findSingle(this.stripWrapper,'ul.ui-galleria-filmstrip');\r\n        }\r\n        \r\n        if(this.images && this.images.length) {\r\n            this.render();\r\n        } \r\n    }\r\n    \r\n    render() {\r\n        this.panels = this.domHandler.find(this.panelWrapper, 'li.ui-galleria-panel'); \r\n        \r\n        if(this.showFilmstrip) {\r\n            this.frames = this.domHandler.find(this.strip,'li.ui-galleria-frame');\r\n            this.stripWrapper.style.width = this.domHandler.width(this.panelWrapper) - 50 + 'px';\r\n            this.stripWrapper.style.height = this.frameHeight + 'px';\r\n        }\r\n        \r\n        if(this.showCaption) {\r\n            this.caption = this.domHandler.findSingle(this.container,'div.ui-galleria-caption');\r\n            this.caption.style.bottom = this.showFilmstrip ? this.domHandler.getOuterHeight(this.stripWrapper,true) + 'px' : 0 + 'px';\r\n            this.caption.style.width = this.domHandler.width(this.panelWrapper) + 'px';\r\n        }\r\n   \r\n        if(this.autoPlay) {\r\n            this.startSlideshow();\r\n        }\r\n        \r\n        this.container.style.visibility = 'visible';\r\n    }\r\n    \r\n    startSlideshow() {\r\n        this.interval = setInterval(() => {\r\n            this.next();\r\n        }, this.transitionInterval);\r\n        \r\n        this.slideshowActive = true;\r\n    }\r\n        \r\n    stopSlideshow() {\r\n        if(this.interval) {\r\n            clearInterval(this.interval);\r\n        }\r\n        \r\n        this.slideshowActive = false;\r\n    }\r\n    \r\n    clickNavRight() {\r\n        if(this.slideshowActive) {\r\n            this.stopSlideshow();\r\n        }\r\n        this.next();\r\n    } \r\n    \r\n    clickNavLeft() {\r\n        if(this.slideshowActive) {\r\n            this.stopSlideshow();\r\n        }\r\n        this.prev();\r\n    }\r\n    \r\n    frameClick(frame) {\r\n        if(this.slideshowActive) {\r\n            this.stopSlideshow();\r\n        }\r\n        \r\n        this.select(this.domHandler.index(frame), false);\r\n    }\r\n    \r\n    prev() {\r\n        if(this.activeIndex !== 0) {\r\n            this.select(this.activeIndex - 1, true);\r\n        }\r\n    }\r\n    \r\n    next() {\r\n        if(this.activeIndex !== (this.panels.length-1)) {\r\n            this.select(this.activeIndex + 1, true);\r\n        }\r\n        else {\r\n            this.select(0, false);\r\n            this.stripLeft = 0;\r\n        }\r\n    }\r\n        \r\n    select(index, reposition) {\r\n        if(index !== this.activeIndex) {            \r\n            let oldPanel = this.panels[this.activeIndex],\r\n            newPanel = this.panels[index];\r\n            \r\n            this.domHandler.fadeIn(newPanel, 500);\r\n            \r\n            if(this.showFilmstrip) {\r\n                let oldFrame = this.frames[this.activeIndex],\r\n                newFrame = this.frames[index];\r\n                \r\n                if(reposition === undefined || reposition === true) {\r\n                    let frameLeft = newFrame.offsetLeft,\r\n                    stepFactor = this.frameWidth + parseInt(getComputedStyle(newFrame)['margin-right'], 10),\r\n                    stripLeft = this.strip.offsetLeft,\r\n                    frameViewportLeft = frameLeft + stripLeft,\r\n                    frameViewportRight = frameViewportLeft + this.frameWidth;\r\n                    \r\n                    if(frameViewportRight > this.domHandler.width(this.stripWrapper))\r\n                        this.stripLeft -= stepFactor;\r\n                    else if(frameViewportLeft < 0)\r\n                        this.stripLeft += stepFactor;\r\n                }\r\n            }\r\n            \r\n            this.activeIndex = index;\r\n        }\r\n    }\r\n    \r\n    clickImage(event, image, i) {\r\n        this.onImageClicked.emit({originalEvent: event, image: image, index: i})\r\n    }\r\n        \r\n    ngOnDestroy() {\r\n        this.stopSlideshow();\r\n    }\r\n\r\n}\r\n\r\n@NgModule({\r\n    imports: [CommonModule],\r\n    exports: [Galleria],\r\n    declarations: [Galleria]\r\n})\r\nexport class GalleriaModule { }"]}